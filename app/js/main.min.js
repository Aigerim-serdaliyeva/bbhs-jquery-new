function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function checkInput(e){return!(!e.val()||"email"==e.attr("type")&&!validateEmail(e.val()))&&(e.removeClass("error"),!0)}function parseGET(e){var t=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"];if(e&&""!=e||(e=decodeURI(document.location.search)),e.indexOf("?")<0)return Array();var n={},s=[],a=[];-1!=(e=(e=e.split("?"))[1]).indexOf("#")&&(e=e.substr(0,e.indexOf("#"))),e.indexOf("&")>-1?s=e.split("&"):s[0]=e;for(var i=0;i<s.length;i++)for(var r=0;r<t.length;r++)s[i].indexOf(t[r]+"=")>-1&&s[i].indexOf("=")>-1&&(n[(a=s[i].split("="))[0]]=a[1]);return n}$(document).ready(function(){var e=$(window),t=$(".page-top"),n=$("html, body"),s=$(".header"),a=$(".main-menu"),i=60;$(".header-burger");const r=$(".header__menu");var o=parseGET();function l(){s.removeClass("header--opened"),r.removeClass("header__menu--active")}o&&Object.keys(o).length>0?window.sessionStorage.setItem("utms",JSON.stringify(o)):o=JSON.parse(window.sessionStorage.getItem("utms")||"[]"),e.width()<992&&(i=60),$(".header__menu").click(function(e){e.preventDefault(),r.hasClass("header__menu--active")?l():(s.addClass("header--opened"),r.addClass("header__menu--active"))}),$(".burger-menu__overlay").click(function(){l()}),$(".burger-menu__close").click(function(){l()}),$(".burger-menu").click(function(){$(this).closest(".header-burger").removeClass("burger-menu--scrolled")}),$(".work").click(function(){$(this).find(".work__block").toggleClass("flex"),$(this).find(".work__img__content").stop()}),e.width()>479&&$("input[type=tel]").mask("+7 (999) 999 99 99",{completed:function(){$(this).removeClass("error")}}),e.scroll(function(){c()});var c=function(){e.scrollTop()>e.height()?t.addClass("active"):t.removeClass("active"),e.scrollTop()>0?s.addClass("header--scrolled"):s.removeClass("header--scrolled");var n=e.scrollTop()+i;a.find(".link").each(function(){var e=$(this),t=e.find("a").attr("href");if(t.length>1&&"#"==t.charAt(0)&&$(t).length>0){var s=$(t),a=s.offset().top;a<=n&&a+s.height()>=n?e.addClass("active"):e.removeClass("active")}})};c(),$(".main-menu .link a").click(function(e){var t=$(this).attr("href");if(t.length>1&&"#"==t.charAt(0)&&$(t).length>0){e.preventDefault();var s=$(t).offset().top-i;n.stop().animate({scrollTop:s},"slow","swing")}}),t.click(function(){n.stop().animate({scrollTop:0},"slow","swing")}),$("input:required, textarea:required").keyup(function(){var e=$(this);"tel"!=e.attr("type")&&checkInput(e)}),$(document).on("closing",".remodal",function(e){$(this).find(".input, .textarea").removeClass("error");var t=$(this).find("form");t.length>0&&t[0].reset()}),$(".ajax-submit").click(function(e){var t=$(this).closest("form"),n=t.find(":required"),s=!0;if(n.each(function(){$elem=$(this),$elem.val()&&checkInput($elem)||($elem.addClass("error"),s=!1)}),s)for(var a in 0===Object.keys(o).length&&(o.utm="Прямой переход"),o){var i=document.createElement("input");i.type="hidden",i.name=a,i.value=o[a],t[0].appendChild(i)}else e.preventDefault()}),$(".tab__link").click(function(){var e=$(this).closest(".tab"),t=$(this).data("id");e.find(".tab__link").removeClass("active"),$(this).addClass("active"),e.find(".tab__content").removeClass("active").filter("[data-tab="+t+"]").addClass("active"),"tab2"===t||"tab3"===t?e.find(".tab__links--min").addClass("d-none"):"tab1"===t&&(e.find(".tab__links--min").removeClass("d-none"),e.find(".tab__link--1").addClass("active"))});const d=function(){const e=$(".thumbs-carousel").find(".slick-active.slick-current").attr("data-img");$(".gallery").css({"background-image":`url('./img/gallery/${e}')`})};$(".thumbs-carousel").on("init",function(){d()}),$(".thumbs-carousel").on("afterChange",function(){d()}),$(".thumbs-carousel").on("click",".slick-slide",function(){const e=$(this).data("img");$(".gallery").css({"background-image":`url('./img/gallery/${e}')`})}),$(".thumbs-carousel").slick({prevArrow:'<button type="button" class="slick-prev"></button>',nextArrow:'<button type="button" class="slick-next"></button>',infinite:!0,slidesToShow:3,slidesToScroll:1,centerMode:!0,draggable:!1,centerPadding:"0px",responsive:[]}),$(".stages-carousel").slick({prevArrow:'<button type="button" class="slick-prev"></button>',nextArrow:'<button type="button" class="slick-next"></button>',slidesToShow:3,slidesToScroll:1,centerMode:!0,draggable:!1,asNavFor:".stages-info",centerPadding:"0px",responsive:[{breakpoint:992,settings:{slidesToShow:3}},{breakpoint:768,settings:{slidesToShow:2}},{breakpoint:580,settings:{slidesToShow:1}}]}),$(".stages-info").slick({arrows:!1,slidesToShow:1,slidesToScroll:1})});